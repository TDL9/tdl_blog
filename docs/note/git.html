<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous"> -->
	<link rel="stylesheet" href="../assets/css/bootstrap.min.css ">
	<link rel="stylesheet" href="../assets/css/code.min.css">
	<link rel="stylesheet" href="../assets/css/atom-one-dark-reasonable.css">
	<link rel="stylesheet" href="../assets/css/style.css" />
	<link rel='stylesheet' href='../assets/css/roboto.css'>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css"> 
    <script type="text/javascript" src="../assets/MathJax/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
	<title>git</title>
</head>
<body>
    <a id="button"></a>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <a class="navbar-brand" href="../index.html">
          <img src="../assets/img/icon.png" class="d-inline-block align-top" alt="" width="31" height="32">
            TDL's wiki
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="../index.html">首页</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../note/index.html">笔记</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="../tutor/index.html">教程</a>
          </li>
        </ul>
      </div>
    </nav>

    <div class="container">
		
<div id="git note"><h1 id="git note" class="header"><a href="#git note">git note</a></h1></div>

<pre>

this = git_note :# "teach me git"
git_note ∋ 
    原理
    细节
    资源

git ∈ distributed . version_control . system

VCS &lt;&lt;- version_control system
CVCS &lt;&lt;- Centralized VCS
DVCS &lt;&lt;- Distributed VCS
</pre>



<pre>
comment
    为什么你需要 DVCS:
    1/ TODO 
    2/ TODO
    3/ TODO
    ref
        https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-Git-%E7%AE%80%E5%8F%B2

?
    https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control#Figure3

git.hash-alg = SHA-1 : Any -&gt; ([16]^40 | 160 bits)
git.db-index = git.hash

git.states = modified | staged | committed


LEFT
    "GUI of git"
    "lazy git"
    diff package.git package.git-all
        ref https://packages.debian.org/sid/git-all
    
    ref
        https://git-scm.com/book/zh/v2/Git-%E5%9F%BA%E7%A1%80-%E8%AE%B0%E5%BD%95%E6%AF%8F%E6%AC%A1%E6%9B%B4%E6%96%B0%E5%88%B0%E4%BB%93%E5%BA%93
        "运行 git add 命令。 这是个多功能命令：可以用它开始跟踪新文件，或者把已跟踪的文件放到暂存区，还能用于合并时把有冲突的文件标记为已解决状态等。 将这个命令理解为“精确地将内容添加到下一次提交中”而不是“将一个文件添加到项目中”要更加合适。"
    
    git diff 的输出的意义
    
comment
    要养成一开始就为你的新仓库设置好 .gitignore 文件的习惯，以免将来误提交这类无用的文件。

    stage 概念上也是一份完整版本?
    
    记住，在 Git 中任何 已提交 的东西几乎总是可以恢复的。
    甚至那些被删除的分支中的提交或使用 --amend 选项覆盖的提交也可以。
    
amend




TARGET
    comment
        things you may want to do
    
    def
        areas-
            1 : working directory
            2 : staged
            3 : tree
            4 : stash
    
    - move file from area-x to area-y
        1-&gt;2 : add
        2-&gt;3 : commit
        3-&gt;2 : restore --staged
        2-&gt;1 : restore
    
    - delete a file from area-x
    
    - view all changes in a commit (or patch?)
    
    - move a (maybe remote) branch?


LEFT
    "mail"
        IMAP
        SMTP
    
    GPG
        all Chapter 7.4

    You can do a lot more with the fast-import tool – handle different modes, binary data, multiple branches and merging, tags, progress indicators, and more. A number of examples of more complex scenarios are available in the contrib/fast-import directory of the Git source code.
    
    .gitattributes
    
</pre>

<div id="git note-git 查看信息专题"><h2 id="git 查看信息专题" class="header"><a href="#git note-git 查看信息专题">git 查看信息专题</a></h2></div>

<div id="git note-git 查看信息专题-git查看提交修改的文件列表 / commit相关信息"><h3 id="git查看提交修改的文件列表 / commit相关信息" class="header"><a href="#git note-git 查看信息专题-git查看提交修改的文件列表 / commit相关信息">git查看提交修改的文件列表 / commit相关信息</a></h3></div>

<p>
git show / git log 技巧
</p>

<p>
todo : <a href="https://blog.csdn.net/hunter168_wang/article/details/121497595">https://blog.csdn.net/hunter168_wang/article/details/121497595</a>
</p>

<div id="git note-git 查看信息专题-git 查看暂存区"><h3 id="git 查看暂存区" class="header"><a href="#git note-git 查看信息专题-git 查看暂存区">git 查看暂存区</a></h3></div>

<p>
todo : <a href="https://blog.csdn.net/qq_40021015/article/details/121741959">https://blog.csdn.net/qq_40021015/article/details/121741959</a>
</p>

<div id="git note-git 查看信息专题-git diff 技巧"><h3 id="git diff 技巧" class="header"><a href="#git note-git 查看信息专题-git diff 技巧">git diff 技巧</a></h3></div>

<p>
todo : <a href="https://blog.csdn.net/weixin_44038264/article/details/119729593">https://blog.csdn.net/weixin_44038264/article/details/119729593</a>
</p>

<div id="git note-git 查看信息专题-git diff 输出的结果什么意思？"><h3 id="git diff 输出的结果什么意思？" class="header"><a href="#git note-git 查看信息专题-git diff 输出的结果什么意思？">git diff 输出的结果什么意思？</a></h3></div>

<p>
ref : <a href="https://blog.csdn.net/shaotianyang12/article/details/122025393">https://blog.csdn.net/shaotianyang12/article/details/122025393</a>
</p>


<hr />

<div id="git note-开放问题"><h2 id="开放问题" class="header"><a href="#git note-开放问题">开放问题</a></h2></div>

<div id="git note-开放问题-如何避免提交debug用的代码（如输出中间变量）"><h3 id="如何避免提交debug用的代码（如输出中间变量）" class="header"><a href="#git note-开放问题-如何避免提交debug用的代码（如输出中间变量）">如何避免提交debug用的代码（如输出中间变量）</a></h3></div>

<div id="git note-开放问题-如何避免提交debug用的代码（如输出中间变量）-solution_1"><h4 id="solution_1" class="header"><a href="#git note-开放问题-如何避免提交debug用的代码（如输出中间变量）-solution_1">solution_1</a></h4></div>

<p>
<a href="https://blog.jonschneider.com/2021/01/configuring-git-to-prevent-commits-of.html">https://blog.jonschneider.com/2021/01/configuring-git-to-prevent-commits-of.html</a>
</p>

<p>
用 pre-commit hook 检查是否存在 "DONOTCOMMIT"
</p>

<pre bash class="code">
#!/bin/bash

FOUND=$(git diff-index --cached -U0 HEAD -- | grep DONOTCOMMIT | wc -l)

if [[ $FOUND -gt 0 ]]; then
    echo "pre-commit hook: DONOTCOMMIT detected, commit not allowed"
    echo "(enforced from: ~/.git_templates/hooks/pre-commit)"
    exit 1
fi
</pre>

<p>
缺点：需要手动删除 / commit -p
</p>

<p>
其他相似 pre-commit hook :
</p>
<ul>
<li>
<a href="https://gist.github.com/wacko/62560b45c1d191859d6b">https://gist.github.com/wacko/62560b45c1d191859d6b</a>

<li>
<a href="https://anotherdatum.com/avoid-committing-junk.html">https://anotherdatum.com/avoid-committing-junk.html</a>

</ul>

<div id="git note-开放问题-如何避免提交debug用的代码（如输出中间变量）-solution_2"><h4 id="solution_2" class="header"><a href="#git note-开放问题-如何避免提交debug用的代码（如输出中间变量）-solution_2">solution_2</a></h4></div>

<p>
<a href="https://stackoverflow.com/questions/43896214/how-to-not-commit-temporary-debug-statements">https://stackoverflow.com/questions/43896214/how-to-not-commit-temporary-debug-statements</a>
</p>

<p>
新建分支 <code>hotfix</code> 开发和debug，再 cherry-pick。
</p>

<pre bash class="code">
git checkout master
git cherry-pick hotfix
# solve the conflict files manually and keep the form you want
git add .
git cherry-pick --continue
</pre>

<p>
基本没用，cherry-pick 尚不支持 --patch。你需要
</p>
<pre>
git cherry-pick -n &lt;commit&gt; (--no-commit)
git reset
git add -p
</pre>
<p>
没有提示也非强制，还是可能误提交。
</p>

<p>
ref : <a href="https://stackoverflow.com/questions/1526044/partly-cherry-picking-a-commit-with-git">https://stackoverflow.com/questions/1526044/partly-cherry-picking-a-commit-with-git</a>
</p>



<hr />


<div id="git note-Tips"><h2 id="Tips" class="header"><a href="#git note-Tips">Tips</a></h2></div>

<div id="git note-Tips-Git Switch branch without files checkout | 切换分支不改变 worktree index 文件"><h3 id="Git Switch branch without files checkout | 切换分支不改变 worktree index 文件" class="header"><a href="#git note-Tips-Git Switch branch without files checkout | 切换分支不改变 worktree index 文件">Git Switch branch without files checkout | 切换分支不改变 worktree index 文件</a></h3></div>

<p>
git symbolic-ref HEAD refs/heads/otherbranch
</p>

<p>
ref : <a href="https://stackoverflow.com/questions/1282639/switch-git-branch-without-files-checkout">https://stackoverflow.com/questions/1282639/switch-git-branch-without-files-checkout</a>
</p>

<p>
<span id="git note-Tips-Git Switch branch without files checkout | 切换分支不改变 worktree index 文件-待验证"></span><strong id="待验证">待验证</strong> : 
下面还有一个回答，只使用 git 基础指令 ("porcelain commands" in <a href="https://git-scm.com/book/en/v2">Progit</a>)
基本上是借用一个临时分支进行 reset。而关键在于：当你 checkout 的分支和 HEAD 实际指向同一个 commit 时，worktree 不会被改动。
</p>

<div id="git note-Tips-github personal access tokens 在哪？"><h3 id="github personal access tokens 在哪？" class="header"><a href="#git note-Tips-github personal access tokens 在哪？">github personal access tokens 在哪？</a></h3></div>

<p>
右上角头像 -&gt; Settings -&gt; 左侧 Developer settings -&gt; 左侧 Personal access tokens
</p>

<div id="git note-Tips-全局 hook"><h3 id="全局 hook" class="header"><a href="#git note-Tips-全局 hook">全局 hook</a></h3></div>

<pre bash class="code">
git config --global init.templatedir '~/.git_template'
</pre>

<p>
将 hooks 放入 <code>~/.git_template/hooks</code> 即可。
</p>

<p>
ref : <a href="https://stackoverflow.com/questions/2293498/applying-a-git-post-commit-hook-to-all-current-and-future-repositories">https://stackoverflow.com/questions/2293498/applying-a-git-post-commit-hook-to-all-current-and-future-repositories</a>
</p>

<p>
已经存在的 repo，可再次运行 <code>git init</code> 来应用 template
</p>

<p>
ref : <a href="https://git-scm.com/docs/git-init">https://git-scm.com/docs/git-init</a>
</p>

<div id="git note-Tips-搭建 ssh git 服务器"><h3 id="搭建 ssh git 服务器" class="header"><a href="#git note-Tips-搭建 ssh git 服务器">搭建 ssh git 服务器</a></h3></div>

<p>
基本只要在能够 ssh 的服务器上，通过 <code>git init --bare</code> 初始化一个裸仓库就可以了。
</p>

<p>
更详细请参考 : <a href="https://zhuanlan.zhihu.com/p/146408354">https://zhuanlan.zhihu.com/p/146408354</a>
</p>

<p>
todo : 配置 ssh 密钥部分
</p>

<p>
还可通过 <code>git instaweb</code> 启动一个简单的网页服务，浏览 repo 信息。
</p>

        <hr>
        <p><small>Last update on 2022-05-29</small></p>
    </div>

<!-- 
    <footer class="page-footer font-small stylish-color-dark fixed-bottom">
      <div class="footer-copyright text-right py-2">
        <a style="margin-right: 10px;" href="mailto:tdl9999z@163.com">tdl9</a>
      </div>
    </footer> -->

</body>
</html>

<script src="../assets/js/jquery-3.3.1.min.js"></script>
<script src="../assets/js/highlight.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<!-- Add class to code -->
<script type="text/javascript">
    $(document).ready(function(){
		$('table').each(function() {
			$(this).prepend('<thead class="thead-dark"></thead>')
			$(this).find('thead').append($(this).find("tr:eq(0)"));
			$(this).addClass('table table-hover table-bordered');
		});

        var btn = $('#button');

        $(window).scroll(function() {
            if ($(window).scrollTop() > 300) {
                btn.addClass('show');
            } else {
                btn.removeClass('show');
            }
        });
        btn.on('click', function(e) {
            e.preventDefault();
            $('html, body').animate({scrollTop:0}, '300');
        });
    });
	$('.code').each(function() {
		$(this).html('<code>'+$(this).html()+'</code>');
	});
  // $('code').each(function() {
  //   $(this).style.tabSize="4";
  // })
	hljs.initHighlightingOnLoad();
</script>

